// GA
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-21417656-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

// Sign up wizard
var _bucky_box_sign_up_wizard = _bucky_box_sign_up_wizard || [];

$(function() {
  $(".sign_up").click(function() {
    _bucky_box_sign_up_wizard.push(['setHost', "https://<%= data.settings.sign_up_wizard_host %>"]);
    //_bucky_box_sign_up_wizard.push(['setHost', 'http://buckybox.dev:3000']);
    _bucky_box_sign_up_wizard.push(['show']);
  });
});


// Smooth scrolling for anchors
$(function() {
  $("a[href^='#']").on('click', function(e) {
     // don't mess up with Bootstrap's carousel arrows
     if ($(this).hasClass("carousel-control")) return true;

     e.preventDefault();

     var hash = this.hash;

     $('html, body').animate({
       scrollTop: $(this.hash).offset().top
     }, 300, function() {
       window.location.hash = hash;
     });
  });
});


// Pricing toggle
$(function() {
  if (!$('#pricing-dropdown').length) return;

  $('#pricing-dropdown li').on('click', function () {
      var currency = $(this).data("currency");

      $('#pricing-plans .currency').hide();
      $('#pricing-plans .currency.' + currency).show();

      $('#pricing-selector .selected-label').html($(this).find('.description').html());
  });

  $.getJSON("https://api.buckybox.com/v1/geoip/", function(geoip) {
    var currency = geoip.currency.toLowerCase();

    $('#pricing-dropdown li[data-currency=' + currency + ']').click();
  });
});

